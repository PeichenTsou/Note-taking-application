{"ast":null,"code":"import _regeneratorRuntime from\"/Users/peipa/Onedrive - Macbook/OneDrive - University of Tasmania/\\u3010Macbook Pro\\u3011/\\u3016\\u5206\\u985E\\u3017/\\u3014RESUME\\u3015/Projects\\u4F5C\\u54C1\\u96C6_2022/React/Note-taking-application-/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"/Users/peipa/Onedrive - Macbook/OneDrive - University of Tasmania/\\u3010Macbook Pro\\u3011/\\u3016\\u5206\\u985E\\u3017/\\u3014RESUME\\u3015/Projects\\u4F5C\\u54C1\\u96C6_2022/React/Note-taking-application-/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/Users/peipa/Onedrive - Macbook/OneDrive - University of Tasmania/\\u3010Macbook Pro\\u3011/\\u3016\\u5206\\u985E\\u3017/\\u3014RESUME\\u3015/Projects\\u4F5C\\u54C1\\u96C6_2022/React/Note-taking-application-/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useState,useEffect,useRef}from\"react\";import{API_GET_DATA}from\"../../global/constants\";import Edit from\"./components/Edit\";import List from\"./components/List\";import\"./index.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function fetchData(_x){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(setData){var res,_yield$res$json,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(API_GET_DATA);case 2:res=_context.sent;_context.next=5;return res.json();case 5:_yield$res$json=_context.sent;data=_yield$res$json.data;setData(data);case 8:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}function fetchSetData(_x2){return _fetchSetData.apply(this,arguments);}function _fetchSetData(){_fetchSetData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(API_GET_DATA,{method:\"PUT\",headers:{\"Content-type\":\"application/json\"},body:JSON.stringify({data:data})});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchSetData.apply(this,arguments);}var Home=function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var submittingStatus=useRef(false);useEffect(function(){if(!submittingStatus.current){return;}fetchSetData(data).then(function(data){return submittingStatus.current=false;});},[data]);useEffect(function(){fetchData(setData);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Edit,{add:setData,submittingStatus:submittingStatus}),/*#__PURE__*/_jsx(List,{listData:data,deleteData:setData,submittingStatus:submittingStatus})]});};export default Home;","map":{"version":3,"names":["useState","useEffect","useRef","API_GET_DATA","Edit","List","fetchData","setData","fetch","res","json","data","fetchSetData","method","headers","body","JSON","stringify","Home","submittingStatus","current","then"],"sources":["/Users/peipa/Onedrive - Macbook/OneDrive - University of Tasmania/【Macbook Pro】/〖分類〗/〔RESUME〕/Projects作品集_2022/React/Note-taking-application-/src/pages/Home/index.js"],"sourcesContent":["import { useState, useEffect, useRef } from \"react\";\nimport { API_GET_DATA } from \"../../global/constants\";\n\nimport Edit from \"./components/Edit\";\nimport List from \"./components/List\";\nimport \"./index.css\";\n\nasync function fetchData(setData) {\n  const res = await fetch(API_GET_DATA);\n  const { data } = await res.json();\n  setData(data);\n}\n\nasync function fetchSetData(data) {\n  await fetch(API_GET_DATA, {\n    method: \"PUT\",\n    headers: {\n      \"Content-type\": \"application/json\",\n    },\n    body: JSON.stringify({ data }),\n  });\n}\n\nconst Home = () => {\n  const [data, setData] = useState([]);\n  const submittingStatus = useRef(false);\n\n  useEffect(() => {\n    if (!submittingStatus.current) {\n      return;\n    }\n    fetchSetData(data).then((data) => (submittingStatus.current = false));\n  }, [data]);\n\n  useEffect(() => {\n    fetchData(setData);\n  }, []);\n\n  return (\n    <div className=\"app\">\n      <Edit add={setData} submittingStatus={submittingStatus} />\n      <List\n        listData={data}\n        deleteData={setData}\n        submittingStatus={submittingStatus}\n      />\n    </div>\n  );\n};\n\nexport default Home;\n"],"mappings":"81BAAA,OAASA,QAAT,CAAmBC,SAAnB,CAA8BC,MAA9B,KAA4C,OAA5C,CACA,OAASC,YAAT,KAA6B,wBAA7B,CAEA,MAAOC,KAAP,KAAiB,mBAAjB,CACA,MAAOC,KAAP,KAAiB,mBAAjB,CACA,MAAO,aAAP,C,gGAEeC,U,yIAAf,iBAAyBC,OAAzB,uKACoBC,MAAK,CAACL,YAAD,CADzB,QACQM,GADR,qCAEyBA,IAAG,CAACC,IAAJ,EAFzB,sCAEUC,IAFV,iBAEUA,IAFV,CAGEJ,OAAO,CAACI,IAAD,CAAP,CAHF,sD,oDAMeC,a,mJAAf,kBAA4BD,IAA5B,+IACQH,MAAK,CAACL,YAAD,CAAe,CACxBU,MAAM,CAAE,KADgB,CAExBC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFe,CAKxBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEN,IAAI,CAAJA,IAAF,CAAf,CALkB,CAAf,CADb,yD,+CAUA,GAAMO,KAAI,CAAG,QAAPA,KAAO,EAAM,CACjB,cAAwBlB,QAAQ,CAAC,EAAD,CAAhC,wCAAOW,IAAP,eAAaJ,OAAb,eACA,GAAMY,iBAAgB,CAAGjB,MAAM,CAAC,KAAD,CAA/B,CAEAD,SAAS,CAAC,UAAM,CACd,GAAI,CAACkB,gBAAgB,CAACC,OAAtB,CAA+B,CAC7B,OACD,CACDR,YAAY,CAACD,IAAD,CAAZ,CAAmBU,IAAnB,CAAwB,SAACV,IAAD,QAAWQ,iBAAgB,CAACC,OAAjB,CAA2B,KAAtC,EAAxB,EACD,CALQ,CAKN,CAACT,IAAD,CALM,CAAT,CAOAV,SAAS,CAAC,UAAM,CACdK,SAAS,CAACC,OAAD,CAAT,CACD,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACE,aAAK,SAAS,CAAC,KAAf,wBACE,KAAC,IAAD,EAAM,GAAG,CAAEA,OAAX,CAAoB,gBAAgB,CAAEY,gBAAtC,EADF,cAEE,KAAC,IAAD,EACE,QAAQ,CAAER,IADZ,CAEE,UAAU,CAAEJ,OAFd,CAGE,gBAAgB,CAAEY,gBAHpB,EAFF,GADF,CAUD,CAzBD,CA2BA,cAAeD,KAAf"},"metadata":{},"sourceType":"module"}